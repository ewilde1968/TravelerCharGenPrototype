CAREERS = [
		             {	"nameString":"Navy",
			            	"Enlistment":{"minValue":8,"DM":[{"attribute":"Intelligence","minValue":8,"bonus":1},
			            	                                 {"attribute":"Education","minValue":9,"bonus":2}]},
			             	"Survival":{"minValue":5,"DM":[{"attribute":"Intelligence","minValue":7,"bonus":2}]},
			             	"Commission":{"minValue":10,"DM":[{"attribute":"Social Standing","minValue":9,"bonus":1}]},
			             	"Promotion":{"minValue":8,"DM":[{"attribute":"Education","minValue":8,"bonus":1}]},
			             	"Reenlist":{"minValue":6},
			             	"Ranks":[{"nameString":"Ensign"},{"nameString":"Lieutenant"},{"nameString":"Lt Commander"},
			             	         {"nameString":"Commander"},
			             	         {"nameString":"Captain","type":"Attribute","Attribute":"Social Standing","value":1},
			             	         {"nameString":"Admiral","type":"Attribute","Attribute":"Social Standing","value":1}],
			             	"Personal Development":[{"type":"Attribute","Attribute":"Strength","value":1},
			             	                        {"type":"Attribute","Attribute":"Dexterity","value":1},
			             	                        {"type":"Attribute","Attribute":"Endurance","value":1},
			             	                        {"type":"Attribute","Attribute":"Intelligence","value":1},
			             	                        {"type":"Attribute","Attribute":"Education","value":1},
			             	                        {"type":"Attribute","Attribute":"Social Standing","value":1}],
			             	"Active Service":[{"type":"Skill","nameString":"Ship's Boat"},
			             	                  {"type":"Skill","nameString":"Vaccuum Suit"},
			             	                  {"type":"Skill","nameString":"Forward Observer"},
			             	                  {"type":"Skill","nameString":"Gunnery"},
			             	                  {"type":"Skill","nameString":"Blade Combat"},
			             	                  {"type":"Skill","nameString":"Gun Combat"}],
			             	"Training":[{"type":"Skill","nameString":"Vaccuum Suit"},
			             	            {"type":"Skill","nameString":"Mechanical"},
			             	            {"type":"Skill","nameString":"Electronics"},
			             	            {"type":"Skill","nameString":"Engineering"},
			             	            {"type":"Skill","nameString":"Gunnery"},
			             	            {"type":"Skill","nameString":"Jack of All Trades"}],
			             	"Advanced Education":[{"type":"Skill","nameString":"Medical"},
			             	                      {"type":"Skill","nameString":"Navigation"},
			             	                      {"type":"Skill","nameString":"Engineering"},
			             	                      {"type":"Skill","nameString":"Computer"},
			             	                      {"type":"Skill","nameString":"Pilot"},
			             	                      {"type":"Skill","nameString":"Admin"}],
			             	"Muster Out Item":[{"type":"PhysicalItem","nameString":"Low Passage"},
		             	                        {"type":"Attribute","Attribute":"Intelligence","value":1},
		             	                        {"type":"Attribute","Attribute":"Education","value":1},
			             	                    {"type":"PhysicalItem","nameString":"Blade Combat"},
			             	                    {"type":"PhysicalItem","nameString":"Traveler's Aid Society"},
			             	                    {"type":"PhysicalItem","nameString":"High Passage"},
			             	                    {"type":"Attribute","Attribute":"Social Standing","value":2}],
			             	"Muster Out Cash":[{"type":"PhysicalItem","nameString":"Credits","quantity":1000},
			             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":5000},
			             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":5000},
			             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
			             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":20000},
			             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":50000},
			             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":50000}]
			             },
			             {	"nameString":"Marines",
				            	"Enlistment":{"minValue":9,"DM":[{"attribute":"Intelligence","minValue":8,"bonus":1},
				            	                                 {"attribute":"Strength","minValue":8,"bonus":2}],
				            	                                 "type":"Skill","skillName":"Cutlass"},
				             	"Survival":{"minValue":6,"DM":[{"attribute":"Endurance","minValue":8,"bonus":2}]},
				             	"Commission":{"minValue":9,"DM":[{"attribute":"Education","minValue":7,"bonus":1}]},
				             	"Promotion":{"minValue":9,"DM":[{"attribute":"Social Standing","minValue":8,"bonus":1}]},
				             	"Reenlist":{"minValue":6},
				             	"Ranks":[{"nameString":"Lieutenant","type":"Skill","skillName":"Revolver"},
				             	         {"nameString":"Captain"},{"nameString":"Force Commander"},
				             	         {"nameString":"Lt Colonel"},{"nameString":"Colonel"},{"nameString":"Brigadier"}],
				             	"Personal Development":[{"type":"Attribute","Attribute":"Strength","value":1},
				             							{"type":"Attribute","Attribute":"Dexterity","value":1},
				             							{"type":"Attribute","Attribute":"Endurance","value":1},
				             							{"type":"Skill","nameString":"Gambling"},
				             							{"type":"Skill","nameString":"Brawling"},
				             							{"type":"Skill","nameString":"Blade Combat"}],
				             	"Active Service":[{"type":"Skill","nameString":"Vehicle"},
				             	                  {"type":"Skill","nameString":"Vaccuum Suit"},
				             	                  {"type":"Skill","nameString":"Blade Combat"},
				             	                  {"type":"Skill","nameString":"Gun Combat"},
				             	                  {"type":"Skill","nameString":"Blade Combat"},
				             	                  {"type":"Skill","nameString":"Gun Combat"}],
				             	"Training":[{"type":"Skill","nameString":"Vehicle"},
				             	            {"type":"Skill","nameString":"Mechanical"},
				             	            {"type":"Skill","nameString":"Electronics"},
				             	            {"type":"Skill","nameString":"Tactics"},
				             	            {"type":"Skill","nameString":"Blade Combat"},
				             	            {"type":"Skill","nameString":"Gun Combat"}],
				             	"Advanced Education":[{"type":"Skill","nameString":"Medical"},
				             	                      {"type":"Skill","nameString":"Tactics"},
				             	                      {"type":"Skill","nameString":"Tactics"},
				             	                      {"type":"Skill","nameString":"Computer"},
				             	                      {"type":"Skill","nameString":"Leader"},
				             	                      {"type":"Skill","nameString":"Admin"}],
				             	"Muster Out Item":[{"type":"PhysicalItem","nameString":"Low Passage"},
			             	                        {"type":"Attribute","Attribute":"Intelligence","value":2},
			             	                        {"type":"Attribute","Attribute":"Education","value":1},
				             	                    {"type":"PhysicalItem","nameString":"Blade Combat"},
				             	                    {"type":"PhysicalItem","nameString":"Traveler's Aid Society"},
				             	                    {"type":"PhysicalItem","nameString":"High Passage"},
				             	                    {"type":"Attribute","Attribute":"Social Standing","value":2}],
				             	"Muster Out Cash":[{"type":"PhysicalItem","nameString":"Credits","quantity":2000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":5000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":5000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":20000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":30000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":40000}]
				         },
			             {	"nameString":"Army",
				            	"Enlistment":{"minValue":5,"DM":[{"attribute":"Dexterity","minValue":6,"bonus":1},
				            	                                 {"attribute":"Endurance","minValue":5,"bonus":2}],
				            	                                 "type":"Skill","skillName":"Rifle"},
				             	"Survival":{"minValue":5,"DM":[{"attribute":"Education","minValue":6,"bonus":2}]},
				             	"Commission":{"minValue":5,"DM":[{"attribute":"Endurance","minValue":7,"bonus":1}]},
				             	"Promotion":{"minValue":6,"DM":[{"attribute":"Education","minValue":7,"bonus":1}]},
				             	"Reenlist":{"minValue":7},
				             	"Ranks":[{"nameString":"Lieutenant","type":"Skill","skillName":"SMG"},
				             	         {"nameString":"Captain"},{"nameString":"Major"},
				             	         {"nameString":"Lt Colonel"},{"nameString":"Colonel"},{"nameString":"General"}],
				             	"Personal Development":[{"type":"Attribute","Attribute":"Strength","value":1},
				             							{"type":"Attribute","Attribute":"Dexterity","value":1},
				             							{"type":"Attribute","Attribute":"Endurance","value":1},
				             							{"type":"Skill","nameString":"Gambling"},
				             							{"type":"Attribute","Attribute":"Education","value":1},
				             							{"type":"Skill","nameString":"Brawling"}],
				             	"Active Service":[{"type":"Skill","nameString":"Vehicle"},
				             	                  {"type":"Skill","nameString":"Air/Raft"},
				             	                  {"type":"Skill","nameString":"Gun Combat"},
				             	                  {"type":"Skill","nameString":"Forward Observer"},
				             	                  {"type":"Skill","nameString":"Blade Combat"},
				             	                  {"type":"Skill","nameString":"Gun Combat"}],
				             	"Training":[{"type":"Skill","nameString":"Vehicle"},
				             	            {"type":"Skill","nameString":"Mechanical"},
				             	            {"type":"Skill","nameString":"Electronics"},
				             	            {"type":"Skill","nameString":"Tactics"},
				             	            {"type":"Skill","nameString":"Blade Combat"},
				             	            {"type":"Skill","nameString":"Gun Combat"}],
				             	"Advanced Education":[{"type":"Skill","nameString":"Medical"},
				             	                      {"type":"Skill","nameString":"Tactics"},
				             	                      {"type":"Skill","nameString":"Tactics"},
				             	                      {"type":"Skill","nameString":"Computer"},
				             	                      {"type":"Skill","nameString":"Leader"},
				             	                      {"type":"Skill","nameString":"Admin"}],
				             	"Muster Out Item":[{"type":"PhysicalItem","nameString":"Low Passage"},
				             	                    {"type":"Attribute","Attribute":"Intelligence","value":1},
				             	                    {"type":"Attribute","Attribute":"Education","value":2},
				             	                    {"type":"PhysicalItem","nameString":"Gun Combat"},
				             	                    {"type":"PhysicalItem","nameString":"High Passage"},
				             	                    {"type":"PhysicalItem","nameString":"Middle Passage"},
				             	                    {"type":"Attribute","Attribute":"Social Standing","value":1}],
				             	"Muster Out Cash":[{"type":"PhysicalItem","nameString":"Credits","quantity":2000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":5000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":20000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":30000}]
				         },
			             {	"nameString":"Scouts",
				            	"Enlistment":{"minValue":7,"DM":[{"attribute":"Intelligence","minValue":6,"bonus":1},
				            	                                 {"attribute":"Strength","minValue":8,"bonus":2}],
				            	                                 "type":"Skill","skillName":"Pilot"},
				             	"Survival":{"minValue":7,"DM":[{"attribute":"Endurance","minValue":9,"bonus":2}]},
				             	"Reenlist":{"minValue":3},
				             	"Personal Development":[{"type":"Attribute","Attribute":"Strength","value":1},
				             							{"type":"Attribute","Attribute":"Dexterity","value":1},
				             							{"type":"Attribute","Attribute":"Endurance","value":1},
				             							{"type":"Attribute","Attribute":"Intelligence","value":1},
				             							{"type":"Attribute","Attribute":"Education","value":1},
				             							{"type":"Skill","nameString":"Gun Combat"}],
				             	"Active Service":[{"type":"Skill","nameString":"Vehicle"},
				             	                  {"type":"Skill","nameString":"Vaccuum Suit"},
				             	                  {"type":"Skill","nameString":"Mechanical"},
				             	                  {"type":"Skill","nameString":"Navigation"},
				             	                  {"type":"Skill","nameString":"Electronics"},
				             	                  {"type":"Skill","nameString":"Jack of All Trades"}],
				             	"Training":[{"type":"Skill","nameString":"Vehicle"},
				             	            {"type":"Skill","nameString":"Mechanical"},
				             	            {"type":"Skill","nameString":"Electronics"},
				             	            {"type":"Skill","nameString":"Jack of All Trades"},
				             	            {"type":"Skill","nameString":"Gunnery"},
				             	            {"type":"Skill","nameString":"Medical"}],
				             	"Advanced Education":[{"type":"Skill","nameString":"Medical"},
				             	                      {"type":"Skill","nameString":"Navigation"},
				             	                      {"type":"Skill","nameString":"Engineering"},
				             	                      {"type":"Skill","nameString":"Computer"},
				             	                      {"type":"Skill","nameString":"Pilot"},
				             	                      {"type":"Skill","nameString":"Jack of All Trades"}],
				             	"Muster Out Item":[{"type":"PhysicalItem","nameString":"Low Passage"},
				             	                    {"type":"Attribute","Attribute":"Intelligence","value":2},
				             	                    {"type":"Attribute","Attribute":"Education","value":2},
				             	                    {"type":"PhysicalItem","nameString":"Blade Combat"},
				             	                    {"type":"PhysicalItem","nameString":"Gun Combat"},
				             	                    {"type":"PhysicalItem","nameString":"Scout Ship"}],
				             	"Muster Out Cash":[{"type":"PhysicalItem","nameString":"Credits","quantity":20000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":20000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":30000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":30000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":50000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":50000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":50000}]
				         },
			             {	"nameString":"Merchants",
				            	"Enlistment":{"minValue":7,"DM":[{"attribute":"Strength","minValue":7,"bonus":1},
				            	                                 {"attribute":"Intelligence","minValue":6,"bonus":2}]},
				             	"Survival":{"minValue":5,"DM":[{"attribute":"Intelligence","minValue":7,"bonus":2}]},
				             	"Commission":{"minValue":4,"DM":[{"attribute":"Intelligence","minValue":6,"bonus":1}]},
				             	"Promotion":{"minValue":10,"DM":[{"attribute":"Intelligence","minValue":9,"bonus":1}]},
				             	"Reenlist":{"minValue":4},
				             	"Ranks":[{"nameString":"4th Officer"},{"nameString":"3rd Officer"},{"nameString":"2nd Officer"},
				             	         {"nameString":"1st Officer","type":"Skill","skillName":"Pilot"},
				             	         {"nameString":"Captain"}],
				             	"Personal Development":[{"type":"Attribute","Attribute":"Strength","value":1},
				             							{"type":"Attribute","Attribute":"Dexterity","value":1},
				             							{"type":"Attribute","Attribute":"Endurance","value":1},
				             							{"type":"Attribute","Attribute":"Strength","value":1},
				             							{"type":"Skill","nameString":"Blade Combat"},
				             							{"type":"Skill","nameString":"Bribery"}],
				             	"Active Service":[{"type":"Skill","nameString":"Vehicle"},
				             	                  {"type":"Skill","nameString":"Vaccuum Suit"},
				             	                  {"type":"Skill","nameString":"Jack of All Trades"},
				             	                  {"type":"Skill","nameString":"Steward"},
				             	                  {"type":"Skill","nameString":"Electronics"},
				             	                  {"type":"Skill","nameString":"Gun Combat"}],
				             	"Training":[{"type":"Skill","nameString":"Streetwise"},
				             	            {"type":"Skill","nameString":"Mechanical"},
				             	            {"type":"Skill","nameString":"Electronics"},
				             	            {"type":"Skill","nameString":"Navigation"},
				             	            {"type":"Skill","nameString":"Gunnery"},
				             	            {"type":"Skill","nameString":"Medical"}],
				             	"Advanced Education":[{"type":"Skill","nameString":"Medical"},
				             	                      {"type":"Skill","nameString":"Navigation"},
				             	                      {"type":"Skill","nameString":"Engineering"},
				             	                      {"type":"Skill","nameString":"Computer"},
				             	                      {"type":"Skill","nameString":"Pilot"},
				             	                      {"type":"Skill","nameString":"Admin"}],
				             	"Muster Out Item":[{"type":"PhysicalItem","nameString":"Low Passage"},
				             	                    {"type":"Attribute","Attribute":"Intelligence","value":1},
				             	                    {"type":"Attribute","Attribute":"Education","value":1},
				             	                    {"type":"PhysicalItem","nameString":"Gun Combat"},
				             	                    {"type":"PhysicalItem","nameString":"Blade Combat"},
				             	                    {"type":"PhysicalItem","nameString":"Low Passage"},
				             	                    {"type":"PhysicalItem","nameString":"Free Trader"}],
				             	"Muster Out Cash":[{"type":"PhysicalItem","nameString":"Credits","quantity":1000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":5000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":20000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":20000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":40000},
				             	                   {"type":"PhysicalItem","nameString":"Credits","quantity":40000}]
				         },
			             {	"nameString":"Other",
				            	"Enlistment":{"minValue":3},
				             	"Survival":{"minValue":5,"DM":[{"attribute":"Intelligence","minValue":9,"bonus":2}]},
				             	"Reenlist":{"minValue":5},
				             	"Personal Development":[{"type":"Attribute","Attribute":"Strength","value":1},
				             							{"type":"Attribute","Attribute":"Dexterity","value":1},
				             							{"type":"Attribute","Attribute":"Endurance","value":1},
				             							{"type":"Skill","nameString":"Blade Combat"},
				             							{"type":"Skill","nameString":"Brawling"},
				             							{"type":"Attribute","Attribute":"Social Standing","value":-1}],
				             	"Active Service":[{"type":"Skill","nameString":"Vehicle"},
				             	                  {"type":"Skill","nameString":"Gambling"},
				             	                  {"type":"Skill","nameString":"Brawling"},
				             	                  {"type":"Skill","nameString":"Bribery"},
				             	                  {"type":"Skill","nameString":"Blade Combat"},
				             	                  {"type":"Skill","nameString":"Gun Combat"}],
				             	"Training":[{"type":"Skill","nameString":"Streetwise"},
				             	            {"type":"Skill","nameString":"Mechanical"},
				             	            {"type":"Skill","nameString":"Electronics"},
				             	            {"type":"Skill","nameString":"Gambling"},
				             	            {"type":"Skill","nameString":"Brawling"},
				             	            {"type":"Skill","nameString":"Forgery"}],
				             	"Advanced Education":[{"type":"Skill","nameString":"Medical"},
				             	                      {"type":"Skill","nameString":"Forgery"},
				             	                      {"type":"Skill","nameString":"Electronics"},
				             	                      {"type":"Skill","nameString":"Computer"},
				             	                      {"type":"Skill","nameString":"Streetwise"},
				             	                      {"type":"Skill","nameString":"Jack of All Trades"}],
				             	"Muster Out Item":[{"type":"PhysicalItem","nameString":"Low Passage"},
				             	                    {"type":"Attribute","Attribute":"Intelligence","value":1},
				             	                    {"type":"Attribute","Attribute":"Education","value":1},
				             	                    {"type":"PhysicalItem","nameString":"Gun Combat"},
				             	                    {"type":"PhysicalItem","nameString":"High Passage"}],
				    		    "Muster Out Cash":[{"type":"PhysicalItem","nameString":"Credits","quantity":1000},
				    		                       {"type":"PhysicalItem","nameString":"Credits","quantity":5000},
				    		                       {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				    		                       {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				    		                       {"type":"PhysicalItem","nameString":"Credits","quantity":10000},
				    		                       {"type":"PhysicalItem","nameString":"Credits","quantity":50000},
				    		                       {"type":"PhysicalItem","nameString":"Credits","quantity":100000}]
				         }
			             ];

// nm could be a name or an index
function Service( nm) {
	var temp = CAREERS[nm];
	var x;
	for( x in temp) {
		var val = temp[x];
		this[ x] = val;
	}
}

Service.prototype.GetBenny = function(str,counter) {
	var result = this[str][counter];

	if( result != null) {
		switch( result.type) {
		case "Skill":
			result = new Skill( result.nameString);
			break;
		case "Attribute":
			result["nameString"] = ((result["value"] < 0) ? "" : "+") + result["value"] + " " + result["Attribute"];
			break;
		case "PhysicalItem":
			result = new PhysicalItem( result.nameString, result["quantity"]);
			break;
		}
	}

	return result;
}

Service.prototype.Enlist = function( char) {
	var result = this;
	
	var roll = new Roll( "2d6").value;
	if( roll < char.DetermineThreshold( this["Enlistment"])) {
		roll = new Roll("1d6").value
		result = new Service( roll - 1);
		
		char.AddHistory( "Aged " + char.Age, "Drafted into " + result["nameString"] + ".");
	} else
		char.AddHistory( "Aged " + char.Age, "Enlisted into " + result["nameString"] + ".");

	char["Service"] = result["nameString"];
	
	// see if any bennies come from enlisting
	if( result["Enlistment"]["type"] == "Skill") {
		var skill = new Skill( result["Enlistment"]["skillName"]);
		char.AddSkill( skill);
	}

	return result;
};

Service.prototype.AddTerm = function( char) {
	// Determine if survived
	var roll = new Roll("2d6").value;
	if( roll < char.DetermineThreshold( this["Survival"])) {
		// died
		char.AddHistory( "Aged " + char.Age, "Killed In Action.");
		DOM_.activeTCG.ChangeState("Dead");
		return "Died";
	}

	// see if commissioned officer
	char["SkillsToChoose"] = (char.Age == 18 || this["nameString"] == "Scouts") ? 2 : 1;
	if( char["Commissioned"] != true && this["Commission"] != null) {
		roll = new Roll("2d6").value;
		if( roll >= char.DetermineThreshold( this["Commission"])) {
			char["Commissioned"] = true;
			char["Rank"] = 0;
			char["SkillsToChoose"]++;

			// see if any bennies come with this rank
			if( this["Ranks"][0]["type"] == "Skill") {
				var skill = new Skill( this["Ranks"][0]["skillName"]);
				char.AddSkill( skill);
			}

			char.AddHistory( "Aged " + char.Age, "Became commissioned officer.");
		}
	}
	
	// see if promoted
	if( char["Commissioned"] == true && this["Ranks"] != null
			&& char["Rank"] < this["Ranks"].length) {
		roll = new Roll("2d6").value;
		if( roll >= char.DetermineThreshold( this["Promotion"])){
			var rank = char["Rank"];
			char["Rank"] = ++rank;
			char["SkillsToChoose"]++;

			// see if any bennies come with this rank
			if( this["Ranks"][rank]["type"] == "Skill") {
				var skill = new Skill( this["Ranks"][rank]["skillName"]);
				char.AddSkill( skill);
			}

			char.AddHistory( "Aged " + char.Age, "Promoted to rank of " + this["Ranks"][rank]["nameString"] + ".");
		}
	}

	DOM_.activeTCG.AddYears( 4);	// always a four year term
	var bennies = char["Muster Out Benefits"];
	bennies = (bennies == null) ? 1 : bennies + 1;
	char["Muster Out Benefits"] = bennies;

	return "Completed";
};

Service.prototype.SelectTermBenny = function( area, character) {
	var roll = new Roll( "1d6").value;
	
	var benny = this.GetBenny( area, roll - 1);
	switch( benny.type) {
	case "Attribute":
		var val = character[ benny["Attribute"]].value;
		character[ benny["Attribute"]].value = val + benny.value;
		character.AddHistory( "Aged " + character.Age, benny["Attribute"] + " changed by " + benny.value + ".")
		DOM_.activeTCG.ChangeState( "SkillSelected");
		break;
	case "basic":
		character.AddSkill( benny);
		DOM_.activeTCG.ChangeState( "SkillSelected");
		break;
	case "generic":
		DOM_.activeTCG.ChangeState( "SpecifyGenericSkill", benny);
		break;
	}
};

Service.prototype.TryToReenlist = function( character) {
	var roll = new Roll( "2d6").value;

	if( roll >= character.DetermineThreshold( this["Reenlist"])) {
		character.AddHistory( "Aged " + character.Age, "Reenlisted for another term.");
		return true;
	}

	character.AddHistory( "Aged " + character.Age, "Reenlistment denied.");
	this.MusterOutBennies(character);

	return false;
};

Service.prototype.MusterOutBennies = function( character) {
	var bennies = character["Muster Out Benefits"];
	var rank = character["Rank"];
	if( rank >= 0)	// rank is zero based
		bennies++;
	if( rank >= 2)
		bennies++;
	if( rank >= 4)
		bennies++;

	character["Muster Out Benefits"] = bennies;
};

Service.prototype.TryToMusterOut = function( character) {
	var roll = new Roll( "2d6").value;
	
	// a 12 is a stop loss order
	if( roll == 12) {
		character.AddHistory( "Aged " + character.Age, "Stop loss order prohibited mustering out.");
		return false;
	}
	character.AddHistory( "Aged " + character.Age, "Mustered Out of the service.");
	this.MusterOutBennies(character);

	return true;
};

Service.prototype.SelectMusterOutBenny = function( character, cash) {
	var roll = new Roll( "1d6").value - 1;	// zero-based array

	// some characters get a +1 bonus to their roll
	if( (!cash && character["Rank"] > 4) || (cash && character.skills["Gambling"] != null))
		roll++;

	// create the benny
	var benny;
	if( cash) {
		benny = this.GetBenny( "Muster Out Cash", roll);
		character["CashChoices"]--;
	} else
		benny = this.GetBenny( "Muster Out Item", roll);

	// set the benefit per type
	if( benny != null) {
		switch( benny.type) {
		case "starship":
		case "basic":
			// if a weapon skill and the weapon is already owned, increase the skill
			// TODO
			character.AddPossession( benny);
			DOM_.activeTCG.ChangeState( "MusterOutSelected");
			break;
		case "generic":
			DOM_.activeTCG.ChangeState( "SpecifyGenericItem", benny);
			break;
		case "Attribute":
			var val = character[ benny["Attribute"]].value;
			character[ benny["Attribute"]].value = val + benny.value;
			character.AddHistory( "Aged " + character.Age, benny["Attribute"] + " changed by " + benny.value + ".")
			DOM_.activeTCG.ChangeState( "MusterOutSelected");
			break;
		}
	}
};

var FindServiceByName = function(str) {
	for(i=0;i<CAREERS.length;i++)
		if( CAREERS[i].nameString == str)
			return CAREERS[i];
	
	return null;
};
